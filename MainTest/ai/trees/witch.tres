[gd_resource type="BehaviorTree" load_steps=28 format=3 uid="uid://6fqyiiyewoyy"]

[ext_resource type="Script" path="res://ai/tasks/get_first_in_group.gd" id="1_wgex2"]
[ext_resource type="Script" path="res://ai/tasks/in_range.gd" id="2_tpwie"]
[ext_resource type="Script" path="res://ai/tasks/face_target.gd" id="3_gw0xv"]
[ext_resource type="Script" path="res://ai/tasks/pursue.gd" id="4_h6g07"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_8rll2"]
var/speed/name = &"speed"
var/speed/type = 3
var/speed/value = 50.0
var/speed/hint = 1
var/speed/hint_string = "10,1000,10"
var/flank_speed/name = &"flank_speed"
var/flank_speed/type = 3
var/flank_speed/value = 50.0
var/flank_speed/hint = 1
var/flank_speed/hint_string = "10,1000,10"
var/charge_speed/name = &"charge_speed"
var/charge_speed/type = 3
var/charge_speed/value = 80.0
var/charge_speed/hint = 1
var/charge_speed/hint_string = "10,1000,10"

[sub_resource type="BBNode" id="BBNode_d07c6"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_nyos2"]
animation_player = SubResource("BBNode_d07c6")
animation_name = &"Idle"

[sub_resource type="BTRandomWait" id="BTRandomWait_aer48"]
min_duration = 0.3
max_duration = 0.6

[sub_resource type="BTAction" id="BTAction_gws5o"]
script = ExtResource("1_wgex2")
group = &"Player"
output_var = &"target"

[sub_resource type="BTSequence" id="BTSequence_k5u26"]
custom_name = "Pause before action"
children = [SubResource("BTPlayAnimation_nyos2"), SubResource("BTRandomWait_aer48"), SubResource("BTAction_gws5o")]

[sub_resource type="BTCondition" id="BTCondition_31e5s"]
script = ExtResource("2_tpwie")
distance_min = 0.0
distance_max = 300.0
target_var = &"target"

[sub_resource type="BTAction" id="BTAction_46i1e"]
script = ExtResource("3_gw0xv")
target_var = &"target"

[sub_resource type="BBNode" id="BBNode_5hlkt"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_q54oj"]
animation_player = SubResource("BBNode_5hlkt")
animation_name = &"Walk"

[sub_resource type="BTAction" id="BTAction_aw70d"]
script = ExtResource("3_gw0xv")
target_var = &"target"

[sub_resource type="BTAction" id="BTAction_eh1g8"]
script = ExtResource("4_h6g07")
target_var = &"target"
speed_var = &"speed"
approach_distance = 50.0

[sub_resource type="BTTimeLimit" id="BTTimeLimit_ydav2"]
time_limit = 0.75
children = [SubResource("BTAction_eh1g8")]

[sub_resource type="BTAlwaysSucceed" id="BTAlwaysSucceed_tdn1o"]
children = [SubResource("BTTimeLimit_ydav2")]

[sub_resource type="BTAction" id="BTAction_iofaq"]
script = ExtResource("3_gw0xv")
target_var = &"target"

[sub_resource type="BBNode" id="BBNode_jrsf8"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_chqdf"]
await_completion = 3.604
animation_player = SubResource("BBNode_jrsf8")
animation_name = &"RangeAttack1"

[sub_resource type="BBNode" id="BBNode_xwuin"]
saved_value = NodePath(".")
resource_name = "."

[sub_resource type="BTCallMethod" id="BTCallMethod_n1c7c"]
node = SubResource("BBNode_xwuin")
method = &"throw_projectile"

[sub_resource type="BTWait" id="BTWait_7pu3v"]
duration = 0.1

[sub_resource type="BTSequence" id="BTSequence_om0y1"]
custom_name = "Range Attack"
children = [SubResource("BTAction_46i1e"), SubResource("BTPlayAnimation_q54oj"), SubResource("BTAction_aw70d"), SubResource("BTAlwaysSucceed_tdn1o"), SubResource("BTAction_iofaq"), SubResource("BTPlayAnimation_chqdf"), SubResource("BTCallMethod_n1c7c"), SubResource("BTWait_7pu3v")]
metadata/_weight_ = 33.0

[sub_resource type="BTProbabilitySelector" id="BTProbabilitySelector_ybrrq"]
children = [SubResource("BTSequence_om0y1")]

[sub_resource type="BTSequence" id="BTSequence_k5hoj"]
custom_name = "Main"
children = [SubResource("BTSequence_k5u26"), SubResource("BTCondition_31e5s"), SubResource("BTProbabilitySelector_ybrrq")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_8rll2")
root_task = SubResource("BTSequence_k5hoj")
